<svg xmlns="http://www.w3.org/2000/svg" width="1181.25" height="782">
<defs><marker id="arrow-filled" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6z" style="stroke: none; fill: black;"></path></marker><marker id="arrow-open" refX="6" refY="3" markerWidth="6" markerHeight="6" orient="auto"><path d="M0,0 6,3 0,6" style="stroke-width: 1; fill: none; stroke: black;"></path></marker></defs><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="39" style="text-anchor: middle; alignment-baseline: central;">kernel</text></g><rect width="71" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="10" y="724"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="45.5" y="743" style="text-anchor: middle; alignment-baseline: central;">kernel</text></g><path d="M45.5,58 v666" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="79.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="348.75" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="388.5" y="39" style="text-anchor: middle; alignment-baseline: central;">atsintc</text></g><rect width="79.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="348.75" y="724"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="388.5" y="743" style="text-anchor: middle; alignment-baseline: central;">atsintc</text></g><path d="M388.5,58 v666" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="122" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="707.5" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="768.5" y="39" style="text-anchor: middle; alignment-baseline: central;">user process</text></g><rect width="122" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="707.5" y="724"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="768.5" y="743" style="text-anchor: middle; alignment-baseline: central;">user process</text></g><path d="M768.5,58 v666" style="stroke-width: 1; fill: none; stroke: black;"></path><rect width="130.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="1020.75" y="20"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="1086" y="39" style="text-anchor: middle; alignment-baseline: central;">shared memory</text></g><rect width="130.5" height="38" style="stroke-width: 1; fill: none; stroke: black;" x="1020.75" y="724"></rect><g><text fill="black" font-family="Helvetica,sans-Serif" x="1086" y="743" style="text-anchor: middle; alignment-baseline: central;">shared memory</text></g><path d="M1086,58 v666" style="stroke-width: 1; fill: none; stroke: black;"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="83" style="text-anchor: middle; alignment-baseline: central;">1.asynchronous syscall init </text></g><path d="M45.5,96 h343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="575" y="125" style="text-anchor: middle; alignment-baseline: central;">2.IPC blocked queue of kernel enqueue </text></g><path d="M388.5,111 C428.5,111 428.5,144 388.5,144" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="927.25" y="159" style="text-anchor: middle; alignment-baseline: central;">3.syscall task write shared memory </text></g><path d="M768.5,172 h317.5" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="578.5" y="197" style="text-anchor: middle; alignment-baseline: central;">4.syscall task write MMIO register </text></g><path d="M768.5,210 h-380" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="579.25" y="239" style="text-anchor: middle; alignment-baseline: central;">5.IPC blocked queue of process enqueue </text></g><path d="M388.5,225 C428.5,225 428.5,258 388.5,258" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="575" y="277" style="text-anchor: middle; alignment-baseline: central;">6.IPC blocked queue of kernel dequeue </text></g><path d="M388.5,263 C428.5,263 428.5,296 388.5,296" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="549.5" y="315" style="text-anchor: middle; alignment-baseline: central;">7.kernel priority queue enqueue </text></g><path d="M388.5,301 C428.5,301 428.5,334 388.5,334" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="349" style="text-anchor: middle; alignment-baseline: central;">8.fetch task </text></g><path d="M45.5,362 h343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="549.5" y="391" style="text-anchor: middle; alignment-baseline: central;">9.kernel priority queue dequeue </text></g><path d="M388.5,377 C428.5,377 428.5,410 388.5,410" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="425" style="text-anchor: middle; alignment-baseline: central;">10.return the syscall handler </text></g><path d="M388.5,438 h-343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="565.75" y="463" style="text-anchor: middle; alignment-baseline: central;">11.read syscall arguments from shared memory </text></g><path d="M45.5,476 h1040.5" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="159.75" y="505" style="text-anchor: middle; alignment-baseline: central;">12.deal with syscall </text></g><path d="M45.5,491 C85.5,491 85.5,524 45.5,524" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="217" y="539" style="text-anchor: middle; alignment-baseline: central;">13.kernel syscall write MMIO register </text></g><path d="M45.5,552 h343" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="583.5" y="581" style="text-anchor: middle; alignment-baseline: central;">14.IPC blocked queue of process dequeue </text></g><path d="M388.5,567 C428.5,567 428.5,600 388.5,600" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="558" y="619" style="text-anchor: middle; alignment-baseline: central;">15.process priority queue enqueue </text></g><path d="M388.5,605 C428.5,605 428.5,638 388.5,638" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="578.5" y="653" style="text-anchor: middle; alignment-baseline: central;">16.fetch task </text></g><path d="M768.5,666 h-380" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path><g><text fill="black" font-family="Helvetica,sans-Serif" x="578.5" y="691" style="text-anchor: middle; alignment-baseline: central;">17.return the blocked syscall task </text></g><path d="M388.5,704 h380" style="stroke-width: 1; fill: none; stroke: black;" marker-end="url(#arrow-filled)"></path></svg>